# üèõ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞: –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è Admin Panel (Multi-Tenant)

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –¥–ª—è –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏, –∫–æ—Ç–æ—Ä–∞—è –æ–±—Å–ª—É–∂–∏–≤–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ–µ–∫—Ç–æ–≤ (–¥–æ–º–µ–Ω–æ–≤) —Å –æ–¥–Ω–æ–π –∫–æ–¥–æ–≤–æ–π –±–∞–∑–æ–π.

## 1. –°—É—Ç—å
–û–¥–∏–Ω —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π (`admin-panel`) –¥–µ–ø–ª–æ–∏—Ç—Å—è –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ `.env` –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –∫–∞–∫–æ–π –ø—Ä–æ–µ–∫—Ç —Å–µ–π—á–∞—Å –∞–∫—Ç–∏–≤–µ–Ω.

## 2. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ü–∞–ø–æ–∫ (Pattern: Core + Features)
–ù–µ —Å–≤–∞–ª–∏–≤–∞–µ–º –≤—Å—ë –≤ –∫—É—á—É. –†–∞–∑–¥–µ–ª—è–µ–º –æ–±—â–µ–µ –∏ –ø—Ä–æ–µ–∫—Ç–Ω–æ–µ.

```text
/src
  /features
    /core           # –û–ë–©–ï–ï: Users, Logs, Settings, Profile (–Ω—É–∂–Ω–æ –≤—Å–µ–º)
    /shop           # –ü–†–û–ï–ö–¢ 1 (–ü—Ä–∏–º–µ—Ä): Products, Orders
    /booking        # –ü–†–û–ï–ö–¢ 2 (–ü—Ä–∏–º–µ—Ä): Cars, Reservations
  /config
    tabsRegistry.ts # –†–ï–ï–°–¢–†: –ú–∞–ø–∏—Ç PROJECT_ID -> –°–ø–∏—Å–æ–∫ —Ç–∞–±–æ–≤
    aclRegistry.ts  # –†–ï–ï–°–¢–†: –ú–∞–ø–∏—Ç PROJECT_ID -> –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
  /components
    Sidebar.tsx     # –ß–∏—Ç–∞–µ—Ç —Ä–µ–µ—Å—Ç—Ä –∏ —Å—Ç—Ä–æ–∏—Ç –º–µ–Ω—é –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏
```

## 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –û–∫—Ä—É–∂–µ–Ω–∏—è (Localhost)
**–ö–†–ò–¢–ò–ß–ù–û –í–ê–ñ–ù–û:** –õ–æ–∫–∞–ª—å–Ω–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–∞–∫ –∂–µ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ, –∫–∞–∫ –∏ –Ω–∞ –ø—Ä–æ–¥–µ.

### –ö–∞–∫ –∑–∞–ø—É—Å–∫–∞—Ç—å
–ò—Å–ø–æ–ª—å–∑—É–µ–º –ø–∞–∫–µ—Ç `env-cmd` –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Å —Ä–∞–∑–Ω—ã–º–∏ –∫–æ–Ω—Ñ–∏–≥–∞–º–∏ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö –ø–æ—Ä—Ç–∞—Ö.

**–§–∞–π–ª—ã:**
*   `.env.shop` (PROJECT_ID=shop)
*   `.env.booking` (PROJECT_ID=booking)

**package.json:**
```json
"scripts": {
  "dev:shop": "env-cmd -f .env.shop next dev -p 3001",
  "dev:booking": "env-cmd -f .env.booking next dev -p 3002"
}
```

### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –õ–æ–∫–∞–ª—å–Ω–æ (–í–∞–∂–Ω–æ!)
*   **–ò–∑–æ–ª—è—Ü–∏—è:** Supabase –¥–æ–±–∞–≤–ª—è–µ—Ç ID –ø—Ä–æ–µ–∫—Ç–∞ –≤ –∏–º—è –∫—É–∫–∏ (`sb-shopdb-auth-token` vs `sb-bookingdb-auth-token`).
*   **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞:** –¢—ã –º–æ–∂–µ—à—å –±—ã—Ç—å –∑–∞–ª–æ–≥–∏–Ω–µ–Ω –∫–∞–∫ ADMIN –≤ `:3001` –∏ –∫–∞–∫ GUEST –≤ `:3002`. –ë—Ä–∞—É–∑–µ—Ä —Ö—Ä–∞–Ω–∏—Ç –æ–±–µ –∫—É–∫–∏, –Ω–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —á–∏—Ç–∞—é—Ç —Ç–æ–ª—å–∫–æ "—Å–≤–æ—é".
*   **Cookie Domain:** –í –ª–æ–∫–∞–ª—å–Ω—ã—Ö `.env` —Ñ–∞–π–ª–∞—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `NEXT_PUBLIC_COOKIE_DOMAIN` –æ—Å—Ç–∞–≤–ª—è–µ–º **–ü–£–°–¢–û–ô**. –≠—Ç–æ –∑–∞—Å—Ç–∞–≤–∏—Ç –∫—É–∫–∏ —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ `localhost` (–∏ –æ–Ω–∏ –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã –Ω–∞ –ª—é–±–æ–º –ø–æ—Ä—Ç—É).

## 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –û–∫—Ä—É–∂–µ–Ω–∏—è (Production)
–î–µ–ø–ª–æ–∏–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π N —Ä–∞–∑.

**Deploy 1 (admin.domain1.com):**
*   `NEXT_PUBLIC_PROJECT_ID=shop`
*   `NEXT_PUBLIC_COOKIE_DOMAIN=.domain1.com`

**Deploy 2 (admin.domain2.com):**
*   `NEXT_PUBLIC_PROJECT_ID=booking`
*   `NEXT_PUBLIC_COOKIE_DOMAIN=.domain2.com`

## 5. –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (Supabase)
–ß—Ç–æ–±—ã –ª–æ–≥–∏–Ω –±—ã–ª —Å–∫–≤–æ–∑–Ω—ã–º (–°–∞–π—Ç <-> –ê–¥–º–∏–Ω–∫–∞):
*   –ò–º—è –∫—É–∫–∏: Supabase –¥–µ–ª–∞–µ—Ç –µ–≥–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã–º –ø–æ ID –ø—Ä–æ–µ–∫—Ç–∞ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏).
*   –î–æ–º–µ–Ω –∫—É–∫–∏:
    *   Localhost: –ü—É—Å—Ç–æ (undefined)
    *   Prod: `.domain.com` (—á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `COOKIE_DOMAIN`)

## 6. –†–µ–µ—Å—Ç—Ä—ã (Registry Pattern)
–í–º–µ—Å—Ç–æ –∫—É—á–∏ `if` –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö, –∏—Å–ø–æ–ª—å–∑—É–µ–º –∫–æ–Ω—Ñ–∏–≥–∏.

`tabsRegistry.ts`:
```typescript
const CONFIG = {
  'shop': [CoreTabs.Users, ShopTabs.Products],
  'booking': [CoreTabs.Users, BookingTabs.Cars],
};
export const getTabs = () => CONFIG[process.env.NEXT_PUBLIC_PROJECT_ID];
```

